# Benchmark Snapshot: PR #30 (tier30)

## Run Context

| Field | Value |
| --- | --- |
| Repository | `f-campana/imageforge` |
| PR | [#30](https://github.com/f-campana/imageforge/pull/30) |
| Workflow run | [Benchmark CI #22036099244](https://github.com/f-campana/imageforge/actions/runs/22036099244) |
| Commit | `e3a907a18a9e54553f2b5a21242264789aefde28` |
| Runner | `ubuntu-24.04`, Node `22` |
| Dataset tier | `tier30` |
| Runs per scenario | `4` (1 cold + 3 warm) |
| Scenarios | `single-small`, `single-median`, `single-large`, `batch-all` |
| Profiles | `P1`, `P2`, `P3` |

Profile definitions:
- `P1`: `--formats webp --quality 80 --blur`
- `P2`: `--formats webp,avif --quality 80 --blur`
- `P3`: `--formats webp,avif --quality 80 --blur --widths 320,640,960,1280`

## Executive Summary

- Validation passed for all scenarios and profiles.
- Advisory regression alerts: `0`.
- Warm-cache timings are stable and tightly clustered.
- Largest measured warm p95 regression vs base was `+10.92%` (`P2/single-small`), below the `+20%` threshold.

## Visual Overview (Head)

### Cold Wall Time by Scenario (ms)

Scale: bars are normalized per profile (max bar in each profile is 24 blocks).

```text
P1 (max = 1998.58 ms)
single-small   109.91 ms | █
single-median  142.91 ms | ██
single-large   658.66 ms | ████████
batch-all     1998.58 ms | ████████████████████████

P2 (max = 11933.05 ms)
single-small   209.66 ms | █
single-median  371.11 ms | █
single-large  3065.68 ms | ██████
batch-all    11933.05 ms | ████████████████████████

P3 (max = 7343.20 ms)
single-small   232.81 ms | █
single-median  671.17 ms | ██
single-large   884.62 ms | ███
batch-all     7343.20 ms | ████████████████████████
```

### Warm p50 Wall Time by Scenario (ms)

Scale: bars are normalized per profile (max bar in each profile is 24 blocks).

```text
P1 (max = 88.64 ms)
single-small    85.40 ms | ███████████████████████
single-median   82.64 ms | ██████████████████████
single-large    82.39 ms | ██████████████████████
batch-all       88.64 ms | ████████████████████████

P2 (max = 91.07 ms)
single-small    83.97 ms | ██████████████████████
single-median   83.80 ms | ██████████████████████
single-large    83.71 ms | ██████████████████████
batch-all       91.07 ms | ████████████████████████

P3 (max = 107.62 ms)
single-small    85.01 ms | ███████████████████
single-median   85.04 ms | ███████████████████
single-large    84.61 ms | ███████████████████
batch-all      107.62 ms | ████████████████████████
```

### Cold vs Warm Speedup (Head)

`speedup = cold wall / warm mean wall`

| Profile | single-small | single-median | single-large | batch-all |
| --- | ---: | ---: | ---: | ---: |
| P1 | 1.27x | 1.73x | 8.00x | 22.43x |
| P2 | 2.43x | 4.46x | 36.79x | 130.10x |
| P3 | 2.73x | 7.94x | 10.46x | 68.32x |

## Head vs Base (Delta %)

Thresholds: warm p50 `+10%`, warm p95 `+20%`, cold `+15%`.

| Profile | Scenario | Warm p50 Δ | Warm p95 Δ | Cold Δ | Alert |
| --- | --- | ---: | ---: | ---: | --- |
| P1 | single-small | +1.17% | +5.63% | -2.71% | no |
| P1 | single-median | -1.94% | -2.43% | -0.54% | no |
| P1 | single-large | -1.45% | -1.84% | +0.76% | no |
| P1 | batch-all | +0.71% | +0.65% | +3.39% | no |
| P2 | single-small | +0.68% | +10.92% | +3.64% | no |
| P2 | single-median | +1.44% | +0.20% | +1.47% | no |
| P2 | single-large | +1.92% | +1.95% | +0.08% | no |
| P2 | batch-all | +1.82% | +3.78% | +0.11% | no |
| P3 | single-small | +1.10% | +2.84% | +1.23% | no |
| P3 | single-median | -0.53% | -0.98% | -0.07% | no |
| P3 | single-large | -0.84% | -0.16% | +0.12% | no |
| P3 | batch-all | -1.65% | -4.04% | +0.01% | no |

## Throughput Snapshot (batch-all)

Warm-cache mean throughput (`images/sec`, higher is better):

| Profile | Warm throughput |
| --- | ---: |
| P1 | 336.68 img/s |
| P2 | 327.07 img/s |
| P3 | 279.11 img/s |

## Artifact References

- Head summary: `/tmp/imageforge-benchmark-artifacts-pr30/bench-head/results/summary.json`
- Base summary: `/tmp/imageforge-benchmark-artifacts-pr30/bench-base/results/summary.json`
- Raw runs (head): `/tmp/imageforge-benchmark-artifacts-pr30/bench-head/results/raw-runs.jsonl`
- Raw runs (base): `/tmp/imageforge-benchmark-artifacts-pr30/bench-base/results/raw-runs.jsonl`
- Comparator JSON: `/tmp/imageforge-benchmark-artifacts-pr30/bench-compare/compare.json`
- Comparator markdown: `/tmp/imageforge-benchmark-artifacts-pr30/bench-compare/compare.md`
- Generated report markdown: `/tmp/imageforge-benchmark-artifacts-pr30/bench-compare/report.md`
